caret_11_subsampling_for_class_imbalances
11 Subsampling For Class Imbalances
subsampling-for-class-imbalances.html
 11.2 Subsampling During Resampling Recent versions of caret allow the user to specify subsampling when using train so that it is conducted inside of resampling. All four methods shown above can be accessed with the basic package using simple syntax. If you want to use your own technique, or want to change some of the parameters for SMOTE or ROSE , the last section below shows how to use custom subsampling. The way to enable subsampling is to use yet another option in trainControl called sampling . The most basic syntax is to use a character string with the name of the sampling method, either "down" , "up" , "smote" , or "rose" . Note that you will need to have the DMwR and ROSE packages installed to use SMOTE and ROSE, respectively. One complication is related to pre-processing. Should the subsampling occur before or after the pre-processing? For example, if you down-sample the data and using PCA for signal extraction, should the loadings be estimated from the entire training set? The estimate is potentially better since the entire training set is being used but the subsample may happen to capture a small potion of the PCA space. There isn’t any obvious answer. The default behavior is to subsample the data prior to pre-processing. This can be easily changed and an example is given below. Now let’s re-run our bagged tree models while sampling inside of cross-validation: Here are the resampling and test set results: The figure below shows the difference in the area under the ROC curve and the test set results for the approaches shown here. Repeating the subsampling procedures for every resample produces results that are more consistent with the test set. 